# 工具库

## 5.1 Lombok

Lombok 是一个 Java 库，通过注解自动生成代码，减少样板代码。

### 5.1.1 添加依赖

```xml
<dependency>
    <groupId>org.projectlombok</groupId>
    <artifactId>lombok</artifactId>
    <version>1.18.24</version>
    <scope>provided</scope>
</dependency>
```

### 5.1.2 使用 Lombok

```java
import lombok.Data;
import lombok.NoArgsConstructor;
import lombok.AllArgsConstructor;
import lombok.ToString;

@Data
@NoArgsConstructor
@AllArgsConstructor
@ToString
public class User {
    private Long id;
    private String name;
    private Integer age;
    private String email;
}
```

## 5.2 MapStruct

MapStruct 是一个代码生成器，用于简化 Java bean 之间的映射。

### 5.2.1 添加依赖

```xml
<dependency>
    <groupId>org.mapstruct</groupId>
    <artifactId>mapstruct</artifactId>
    <version>1.5.2.Final</version>
</dependency>
<dependency>
    <groupId>org.mapstruct</groupId>
    <artifactId>mapstruct-processor</artifactId>
    <version>1.5.2.Final</version>
    <scope>provided</scope>
</dependency>
```

### 5.2.2 创建映射接口

```java
import org.mapstruct.Mapper;
import org.mapstruct.Mapping;
import org.mapstruct.factory.Mappers;

@Mapper
public interface UserMapper {
    UserMapper INSTANCE = Mappers.getMapper(UserMapper.class);
    
    @Mapping(source = "name", target = "userName")
    UserDto userToUserDto(User user);
    
    @Mapping(source = "userName", target = "name")
    User userDtoToUser(UserDto userDto);
}
```

### 5.2.3 使用映射

```java
import org.noear.solon.annotation.Component;

@Component
public class UserService {
    
    public UserDto getUserDto(User user) {
        return UserMapper.INSTANCE.userToUserDto(user);
    }
    
    public User getUser(UserDto userDto) {
        return UserMapper.INSTANCE.userDtoToUser(userDto);
    }
}
```

## 5.3 Apache Commons

Apache Commons 是一个开源的 Java 工具库集合，提供了许多常用的工具类。

### 5.3.1 添加依赖

```xml
<dependency>
    <groupId>org.apache.commons</groupId>
    <artifactId>commons-lang3</artifactId>
    <version>3.12.0</version>
</dependency>
<dependency>
    <groupId>org.apache.commons</groupId>
    <artifactId>commons-collections4</artifactId>
    <version>4.4</version>
</dependency>
<dependency>
    <groupId>org.apache.commons</groupId>
    <artifactId>commons-io</artifactId>
    <version>2.11.0</version>
</dependency>
```

### 5.3.2 使用 Apache Commons

```java
import org.apache.commons.lang3.StringUtils;
import org.apache.commons.collections4.CollectionUtils;
import org.apache.commons.io.FileUtils;
import java.io.File;
import java.io.IOException;
import java.util.List;

public class CommonsExample {
    
    public void example() {
        // 使用 Commons Lang
        String str = "  Hello World  ";
        String trimmed = StringUtils.trim(str);
        boolean isEmpty = StringUtils.isEmpty(str);
        
        // 使用 Commons Collections
        List<String> list = List.of("a", "b", "c");
        boolean isNotEmpty = CollectionUtils.isNotEmpty(list);
        
        // 使用 Commons IO
        File file = new File("example.txt");
        try {
            String content = FileUtils.readFileToString(file, "UTF-8");
            FileUtils.writeStringToFile(file, "Hello World", "UTF-8");
        } catch (IOException e) {
            e.printStackTrace();
        }
    }
}
```
