# Solon 框架的使用方式

## 1. 项目初始化

### 1.1 使用 Maven 初始化项目

在 Maven 项目中添加 Solon 依赖：

```xml
<dependencies>
    <!-- Solon 核心依赖 -->
    <dependency>
        <groupId>org.noear</groupId>
        <artifactId>solon-web</artifactId>
        <version>2.7.6</version>
    </dependency>
    
    <!-- 可选：添加 Undertow 服务器 -->
    <dependency>
        <groupId>org.noear</groupId>
        <artifactId>solon.boot.undertow</artifactId>
        <version>2.7.6</version>
    </dependency>
</dependencies>
```

### 1.2 创建应用入口类

```java
import org.noear.solon.Solon;

public class App {
    public static void main(String[] args) {
        Solon.start(App.class, args);
    }
}
```

## 2. 控制器开发

### 2.1 创建基本控制器

```java
import org.noear.solon.annotation.Controller;
import org.noear.solon.annotation.Mapping;

@Controller
public class DemoController {
    
    @Mapping("/hello")
    public String hello() {
        return "Hello, Solon!";
    }
}
```

### 2.2 路径参数

```java
@Mapping("/user/{id}")
public String getUser(int id) {
    return "User ID: " + id;
}
```

### 2.3 请求参数

```java
@Mapping("/search")
public String search(String keyword, int page) {
    return "Search: " + keyword + ", Page: " + page;
}
```

### 2.4 请求体参数

```java
@Mapping("/add")
public String add(User user) {
    return "Add user: " + user.getName();
}
```

## 3. 服务层开发

### 3.1 定义服务接口

```java
public interface HelloService {
    String sayHello(String name);
}
```

### 3.2 实现服务

```java
import org.noear.solon.annotation.Component;

@Component
public class HelloServiceImpl implements HelloService {
    @Override
    public String sayHello(String name) {
        return "Hello, " + name + "!";
    }
}
```

### 3.3 注入服务

```java
@Controller
public class DemoController {
    
    @Inject
    HelloService helloService;
    
    @Mapping("/hello/{name}")
    public String hello(String name) {
        return helloService.sayHello(name);
    }
}
```

## 4. 配置管理

### 4.1 使用 application.yml 配置文件

在 resources 目录下创建 app.yml 文件：

```yaml
server:
  port: 8080
  contextPath: /api

app:
  name: solon-demo
  version: 1.0.0
```

### 4.2 读取配置

```java
import org.noear.solon.annotation.Configuration;
import org.noear.solon.annotation.Inject;

@Configuration
public class AppConfig {
    
    @Inject("${app.name}")
    String appName;
    
    @Inject("${app.version}")
    String appVersion;
}
```

## 5. 数据库操作

### 5.1 添加数据库依赖

```xml
<dependency>
    <groupId>org.noear</groupId>
    <artifactId>solon.data</artifactId>
    <version>2.7.6</version>
</dependency>
<dependency>
    <groupId>org.noear</groupId>
    <artifactId>solon.extend.mybatis-plus</artifactId>
    <version>2.7.6</version>
</dependency>
<dependency>
    <groupId>com.zaxxer</groupId>
    <artifactId>HikariCP</artifactId>
    <version>4.0.3</version>
</dependency>
<dependency>
    <groupId>mysql</groupId>
    <artifactId>mysql-connector-java</artifactId>
    <version>8.0.28</version>
</dependency>
```

### 5.2 配置数据源

```yaml
db:
  url: jdbc:mysql://localhost:3306/test
  username: root
  password: 123456
  driverClassName: com.mysql.cj.jdbc.Driver
```

### 5.3 使用 MyBatis-Plus

```java
import com.baomidou.mybatisplus.core.mapper.BaseMapper;
import org.noear.solon.annotation.Repository;

@Repository
public interface UserMapper extends BaseMapper<User> {
}
```

## 6. AOP 应用

### 6.1 创建切面

```java
import org.noear.solon.annotation.Aspect;
import org.noear.solon.annotation.Before;
import org.noear.solon.core.handle.Invocation;

@Aspect
public class LogAspect {
    @Before("*Controller.*()")
    public void before(Invocation inv) {
        System.out.println("Before method: " + inv.getMethod().getName());
        inv.proceed();
    }
}
```

## 7. 异常处理

### 7.1 全局异常处理

```java
import org.noear.solon.annotation.Component;
import org.noear.solon.core.handle.ExceptionHandler;
import org.noear.solon.core.handle.Context;

@Component
public class GlobalExceptionHandler implements ExceptionHandler {
    @Override
    public void handle(Context ctx, Throwable e) {
        ctx.status(500);
        ctx.output("Internal Server Error: " + e.getMessage());
    }
}
```

## 8. 启动应用

### 8.1 运行应用入口类

直接运行 App 类的 main 方法即可启动应用。

### 8.2 访问应用

在浏览器中访问：http://localhost:8080/api/hello

## 9. 部署应用

### 9.1 打包应用

```bash
mvn clean package
```

### 9.2 运行 jar 包

```bash
java -jar target/solon-demo-1.0.0.jar
```
